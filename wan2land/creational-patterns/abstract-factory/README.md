# 추상팩토리 (Abstract Factory)

추상팩토리는 기존의 팩토리를 확장할 때 사용합니다. 동작 구조는 똑같고, 구현체가 여러개인 경우 사용합니다. 객체지향 프로그래밍에서는 의존성을 주입해서 사용하는 경우가 많습니다. "추상"이라는 용어 때문에 추상클래스를 사용해야 할 것 같지만 실제로 인터페이스를 포함한 개념입니다.

자동차를 만든다고 가정합시다. 바퀴를 만드는 공장과 창문을 만드는 공장이 있다면 기본 팩토리 패턴을 사용하면 다음과 같이 구현합니다.

```text
┌─────────────────┐                   
│     Client      │                   
└─────────────────┘                   
         │                            
         ▼                            
┌─────────────────┐                   
│   CarFactory    │                   
├─────────────────┤      ┌───────────┐
│                 │ ────▶│  Window   │
│+ createWindow() │      └───────────┘
│+ createWheels() │      ┌───────────┐
│                 │ ────▶│   Wheel   │
└─────────────────┘      └───────────┘
```

그런데 생산되는 자동차가 여러종류가 된다면 추상팩토리를 응용하면 됩니다.

Benzz 자동차 공장과 Teslaa 자동차 공장(자동차 이름을 어디서 들어봤다면 기분탓일 겁니다.)을 만들고, 창문만들고, 바퀴만드는 구조가 같다면 추상팩토리를 통해 확장 가능합니다.

BenzzFactory는 BenzzWheel, BenzzWindow를 생산합니다. 그리고 TeslaaFactory는 TeslaaWheel, TeslaaWindow를 생산합니다. 그리고 이 공장을 사용하는 객체는 추상화된 CarFactory만을 바라보고 있으면 됩니다. 구조는 다음과 같습니다.

```text
       ┌─────────────────┐                                                          
       │     Client      │                                                          
       └─────────────────┘                                                          
                │                                                                   
                ▼                                                                   
       ┌─────────────────┐                                                          
       │  <<interface>>  │                                                          
       │   CarFactory    │────────────────────────────────┬───────────────┐         
       ├─────────────────┤                                ▼               │         
       │+ createWindow() │                          ┌───────────┐         │         
       │+ createWheels() │                          │  Window   │         │         
       └─────────────────┘                          └───────────┘         │         
                △                                        △                │         
                │                                        │                │         
        ┌ ─ ─ ─ ┘─ ─ ─ ─ ┐                        ┌ ─ ─ ─ ─ ─ ─ ┐         │         
                                                                          │         
        │                │                        │             │         │         
┌──────────────┐ ┌───────────────┐          ┌───────────┐ ┌──────────┐    │         
│ BenzzFactory │ │ TeslaaFactory │──┬──────▶│TeslaaWheel│ │BenzzWheel│◀───┼────────┐
└──────────────┘ └───────────────┘  │       └───────────┘ └──────────┘    │        │
        │                           │               ┌───────────┐         │        │
        │                           │               │   Wheel   │◀────────┘        │
        │                           │               └───────────┘                  │
        │                           │                     △                        │
        │                           │                     │                        │
        │                           │             ┌ ─ ─ ─ ┘─ ─ ─ ┐                 │
        │                           │                                              │
        │                           │             │              │                 │
        │                           │      ┌────────────┐  ┌───────────┐           │
        │                           └─────▶│TeslaaWindow│  │BenzzWindow│◀──────────┤
        │                                  └────────────┘  └───────────┘           │
        └──────────────────────────────────────────────────────────────────────────┘
```

[소스보기](./sample.ts)

## Maze Sample

책에서 다룬 미로(Maze) 코드 샘플입니다.

[소스보기(Typescript)](./maze.ts)

